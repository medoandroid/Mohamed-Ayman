const darkModeToggle=document.getElementById('darkModeToggle');const body=document.body;darkModeToggle.addEventListener('click',()=>{body.classList.toggle('dark-mode');const isDarkMode=body.classList.contains('dark-mode');darkModeToggle.innerHTML=isDarkMode?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>';localStorage.setItem('dark-mode',isDarkMode)});const savedDarkMode=localStorage.getItem('dark-mode');if(savedDarkMode==='true'){body.classList.add('dark-mode');darkModeToggle.innerHTML='<i class="fas fa-sun"></i>'}document.getElementById('messageForm').addEventListener('submit',async e=>{e.preventDefault();const message=document.getElementById('messageInput').value;const spinner=document.getElementById('spinner');if(message){spinner.classList.remove('hidden');const encryptedToken=atob('Njg1MDIwNzQxNTpBQUhmOG5NcTBQODVwSEphTkVUTkJvQWk0bjBadEo4MVozMw==');const encryptedChatId=atob('MTA3MzQxMDM2Nw==');const url=`https://api.telegram.org/bot${encryptedToken}/sendMessage`;const data={chat_id:encryptedChatId,text:message};try{const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});const result=await response.json();if(result.ok){alert('تم إرسال الرسالة بنجاح!');document.getElementById('messageForm').reset()}else{alert('خطأ في إرسال الرسالة: '+result.description)}}catch(error){console.error('Error sending message: ',error);alert('حدث خطأ أثناء إرسال الرسالة. الرجاء المحاولة مرة أخرى.')}finally{spinner.classList.add('hidden')}}else{alert('الرجاء كتابة رسالة قبل الإرسال.')}});